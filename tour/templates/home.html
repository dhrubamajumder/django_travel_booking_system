{% include 'index.html' %}
{% block content %}

{% load static %}

<style>
/* Card base animation */
.card {
  transition: transform 0.4s ease, box-shadow 0.4s ease;
  cursor: pointer;
  border-radius: 15px;
  overflow: hidden;
}

/* Hover lift + shadow */
.card:hover {
  transform: translateY(-12px) scale(1.03);
  box-shadow: 0 22px 45px rgba(0,0,0,0.30);
}

/* Image zoom effect */
.card-img-top {
  transition: transform 0.4s ease;
}

.card:hover .card-img-top {
  transform: scale(1.08);
}

/* Title hover color */
.custom-btn h2 {
  transition: color 0.3s ease;
}

.card:hover .custom-btn h2 {
  color: #0d6efd;
}

/* Seats & price hover color */
.card p,
.card h3 {
  transition: color 0.3s ease;
}

.card:hover p,
.card:hover h3 {
  color: #0e57c5;
}

/* Plus icon animation */
.btn-outline-dark i {
  font-size: 26px;
  transition: transform 0.3s ease, color 0.3s ease;
}

.btn-outline-dark:hover i {
  color: #0d6efd;
  transform: scale(1.25) rotate(10deg);
}
</style>

<section id="home">
  <div class="card text-bg-dark">
    <img src="{% static 'images/tour.jpg' %}" alt="Tour"
        class="card-img mt-5"
        style="height: 100%; width: 100%; object-fit: cover; filter: brightness(60%);">

    <div class="card-img-overlay d-flex flex-column justify-content-center text-center mb-5">
      <h1 class="card-title display-4 fw-bold">Explore the World</h1>
      <p class="card-text fs-5" style="color: aliceblue;">Book your next adventure now!</p>
    </div>
  </div>
</section>

<section id="events">
  <div class="content m-4">
      <h1 class="text-center" style="color: rgb(3, 3, 142);">Popular Destinations</h1><hr>
    <div class="row">
      {% for d in destination %}
        <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
          <div class="card shadow h-100" data-id="{{ d.id }}" data-destination="{{ d.name }}" data-price="{{ d.price }}" data-seats="{{ d.seats }}">
            {% if d.image %}
              <img src="{{ d.image.url }}" class="card-img-top" alt="{{ d.name }}">
            {% endif %}
            <div class="card-body">
              <div class="row">
                <div class="col-7"><h3 class="custom-btn"><b>{{ d.name }}</b></h3></div>
                <div class="col-5 p-2"><i class="bi bi-person-add"></i><b> {{ d.seats }} Seats Available </b></div>
                <div class="col-8"><i class="bi bi-clock"></i> {{ d.days }}</div>
                <div class="col-4"><i class="bi bi-calendar"></i> {{ d.travel_date|date:"d M Y" }}</div>
                <div class="col-10" style="font-family: 'Poppins', sans-serif;"><h3><b>à§³{{ d.price }}</b></h3></div>
                <!-- Updated link: add .select-destination class -->
                <div class="col-2">
                  <a href="{% url 'booking_form' %}?id={{ d.id }}" class="btn btn-outline-dark select-destination"> 
                    <i class="bi bi-plus-lg"></i> 
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% if forloop.counter|divisibleby:3 %}
          <hr class="invisible">  
        {% endif %}
      {% empty %}
        <p>No destinations found.</p>
      {% endfor %}
    </div>
  </div>
</section>

<script>
// Save clicked card details to localStorage
document.querySelectorAll('.select-destination').forEach(btn => {
    btn.addEventListener('click', function(e) {
        const card = this.closest('.card');
        if (!card) return;
        localStorage.setItem('selectedDestination', card.getAttribute('data-destination'));
        localStorage.setItem('selectedPrice', card.getAttribute('data-price'));
        localStorage.setItem('selectedSeats', card.getAttribute('data-seats'));
        localStorage.setItem('selectedDestinationId', card.getAttribute('data-id'));
    });
});
</script>

{% endblock %}
